<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>My Project: Internet Stack Model</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">My Project
   &#160;<span id="projectnumber">beta 0.01</span>
   </div>
   <div id="projectbrief">Doxygen for HPCC-plus</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__internet_stack_model.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(13)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Internet Stack Model<div class="ingroups"><a class="el" href="group__internet.html">Internet</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<h1><a class="anchor" id="internetStackTracingModel"></a>
Tracing in the Internet Stack</h1>
<p>The internet stack provides a number of trace sources in its various protocol implementations. These trace sources can be hooked using your own custom trace code, or you can use our helper functions in some cases to arrange for tracing to be enabled.</p>
<h2><a class="anchor" id="internetStackArpTracingModel"></a>
Tracing in ARP</h2>
<p>ARP provides two trace hooks, one in the cache, and one in the layer three protocol. The trace accessor in the cache is given the name "Drop." When a packet is transmitted over an interface that requires ARP, it is first queued for transmission in the ARP cache until the required MAC address is resolved. There are a number of retries that may be done trying to get the address, and if the maximum retry count is exceeded the packet in question is dropped by ARP. The single trace hook in the ARP cache is called,</p>
<ul>
<li>If an outbound packet is placed in the ARP cache pending address resolution and no resolution can be made within the maximum retry count, the outbound packet is dropped and this trace is fired;</li>
</ul>
<p><a class="el" href="class_a.html">A</a> second trace hook lives in the ARP L3 protocol (also named "Drop") and may be called for a number of reasons.</p>
<ul>
<li>If an ARP reply is received for an entry that is not waiting for a reply, the ARP reply packet is dropped and this trace is fired;</li>
<li>If an ARP reply is received for a non-existant entry, the ARP reply packet is dropped and this trace is fired;</li>
<li>If an ARP cache entry is in the DEAD state (has timed out) and an ARP reply packet is received, the reply packet is dropped and this trace is fired.</li>
<li>Each ARP cache entry has a queue of pending packets. If the size of the queue is exceeded, the outbound packet is dropped and this trace is fired.</li>
</ul>
<h2><a class="anchor" id="internetStackIpv4TracingModel"></a>
Tracing in IPv4</h2>
<p>The IPv4 layer three protocol provides three trace hooks. These are the "Tx" (<a class="el" href="classns3_1_1_ipv4_l3_protocol.html#a91a19b062bd7e55da11615385e0e2788">ns3::Ipv4L3Protocol::m_txTrace</a>), "Rx" (<a class="el" href="classns3_1_1_ipv4_l3_protocol.html#a8a973a63eb239c315d630c9ff300823a">ns3::Ipv4L3Protocol::m_rxTrace</a>) and "Drop" (<a class="el" href="classns3_1_1_ipv4_l3_protocol.html#a80984e2de6a2562b04195b975014cb1b">ns3::Ipv4L3Protocol::m_dropTrace</a>) trace sources.</p>
<p>The "Tx" trace is fired in a number of situations, all of which indicate that a given packet is about to be sent down to a given <a class="el" href="classns3_1_1_ipv4_interface.html" title="The IPv4 representation of a network interface. ">ns3::Ipv4Interface</a>.</p>
<ul>
<li>In the case of a packet destined for the broadcast address, the Ipv4InterfaceList is iterated and for every interface that is up and can fragment the packet or has a large enough MTU to transmit the packet, the trace is hit. See <a class="el" href="classns3_1_1_ipv4_l3_protocol.html#ac00412b5cdf2a3289fc96681a9533e60">ns3::Ipv4L3Protocol::Send</a>.</li>
<li>In the case of a packet that needs routing, the "Tx" trace may be fired just before a packet is sent to the interface appropriate to the default gateway. See <a class="el" href="classns3_1_1_ipv4_l3_protocol.html#ac1baf310b12bbc564d0766061ecca323">ns3::Ipv4L3Protocol::SendRealOut</a>.</li>
<li>Also in the case of a packet that needs routing, the "Tx" trace may be fired just before a packet is sent to the outgoing interface appropriate to the discovered route. See <a class="el" href="classns3_1_1_ipv4_l3_protocol.html#ac1baf310b12bbc564d0766061ecca323">ns3::Ipv4L3Protocol::SendRealOut</a>.</li>
</ul>
<p>The "Rx" trace is fired when a packet is passed from the device up to the <a class="el" href="classns3_1_1_ipv4_l3_protocol.html#a2f27fb0a3f698ffb34a654323b063c94" title="Lower layer calls this method after calling L3Demux::Lookup The ARP subclass needs to know from which...">ns3::Ipv4L3Protocol::Receive</a> function.</p>
<ul>
<li>In the receive function, the Ipv4InterfaceList is iterated, and if the Ipv4Interface corresponding to the receiving device is fount to be in the UP state, the trace is fired.</li>
</ul>
<p>The "Drop" trace is fired in any case where the packet is dropped (in both the transmit and receive paths).</p>
<ul>
<li>In the ns3::Ipv4Interface::Receive function, the packet is dropped and the drop trace is hit if the interface corresponding to the receiving device is in the DOWN state.</li>
<li>Also in the ns3::Ipv4Interface::Receive function, the packet is dropped and the drop trace is hit if the checksum is found to be bad.</li>
<li>In <a class="el" href="classns3_1_1_ipv4_l3_protocol.html#ac00412b5cdf2a3289fc96681a9533e60">ns3::Ipv4L3Protocol::Send</a>, an outgoing packet bound for the broadcast address is dropped and the "Drop" trace is fired if the "don't fragement" bit is set and fragmentation is available and required.</li>
<li>Also in <a class="el" href="classns3_1_1_ipv4_l3_protocol.html#ac00412b5cdf2a3289fc96681a9533e60">ns3::Ipv4L3Protocol::Send</a>, an outgoing packet destined for the broadcast address is dropped and the "Drop" trace is hit if fragmentation is not available and is required (MTU &lt; packet size).</li>
<li>In the case of a broadcast address, an outgoing packet is cloned for each outgoing interface. If any of the interfaces is in the DOWN state, the "Drop" trace event fires with a reference to the copied packet.</li>
<li>In the case of a packet requiring a route, an outgoing packet is dropped and the "Drop" trace event fires if no route to the remote host is found.</li>
<li>In <a class="el" href="classns3_1_1_ipv4_l3_protocol.html#ac1baf310b12bbc564d0766061ecca323">ns3::Ipv4L3Protocol::SendRealOut</a>, an outgoing packet being routed is dropped and the "Drop" trace is fired if the "don't fragement" bit is set and fragmentation is available and required.</li>
<li>Also in <a class="el" href="classns3_1_1_ipv4_l3_protocol.html#ac1baf310b12bbc564d0766061ecca323">ns3::Ipv4L3Protocol::SendRealOut</a>, an outgoing packet being routed is dropped and the "Drop" trace is hit if fragmentation is not available and is required (MTU &lt; packet size).</li>
<li>An outgoing packet being routed is dropped and the "Drop" trace event fires if the required Ipv4Interface is in the DOWN state.</li>
<li>If a packet is being forwarded, and the TTL is exceeded (see ns3::Ipv4L3Protocol::DoForward), the packet is dropped and the "Drop" trace event is fired.</li>
</ul>
<h2><a class="anchor" id="internetStackNs3TCPTracingModel"></a>
Tracing in ns-3 TCP</h2>
<p>There is currently one trace source in the ns-3 TCP implementation named "CongestionWindow" (see ns3::TcpSocketImpl::m_cWnd). This is set in a number of places (see file tcp-socket-impl.cc) whenever the value of the congestion window is changed.</p>
<h2><a class="anchor" id="internetStackNscTCPTracingModel"></a>
Tracing in NSC TCP</h2>
<p>There is currently one trace source in the Network Simulation Cradle TCP implementation named "CongestionWindow" (see <a class="el" href="classns3_1_1_nsc_tcp_socket_impl.html#a7e61e32de2c6d1e1296c2d78ba513fb2">ns3::NscTcpSocketImpl::m_cWnd</a>). This is set in a number of places (see file <a class="el" href="nsc-tcp-socket-impl_8cc.html">nsc-tcp-socket-impl.cc</a>) when the value of the cogestion window is initially set. Note that this is not instrumented from the underlying TCP implementaion.</p>
<h2><a class="anchor" id="internetStackNs3UdpTracingModel"></a>
Tracing in ns-3 UDP</h2>
<p>There is currently one trace source in the ns-3 UDP implementation named "Drop" (see <a class="el" href="classns3_1_1_udp_socket_impl.html#a786fed61e3c4c68280656c4036514c11">ns3::UdpSocketImpl::m_dropTrace</a>). This is set when a packet is received in <a class="el" href="classns3_1_1_udp_socket_impl.html#a4e7da0c3ae15eaece50835536ba4f2e1">ns3::UdpSocketImpl::ForwardUp</a> and the receive buffer cannot accomodate the encapsulated data. </p>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu May 16 2024 11:27:03 for My Project by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
